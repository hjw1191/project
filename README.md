# 당근 마차 (Carrot Carriage)

<p align="center">
  <img src="https://github.com/hjw1191/project/assets/75131851/185a5b4d-7866-4feb-8589-70bd5e91d3c4" width="600" alt="주요기능">
</p>

## 프로젝트 개요

당근 마차는 당근 마켓 앱을 모티브로 한 근거리 카풀 및 택시 나눠타기 
서비스입니다. 이 웹 애플리케이션을 통해 사용자들은 운전자, 탑승자, 
또는 택시로 등록하여 카풀을 공유하고 예약할 수 있습니다.

## 주요 기능

1. **카풀 관리 (Main.js)**
   - 최근 게시글 목록 표시
   - 유형별 필터링 (전체, 택시, 운전자, 탑승자)
   - 검색 기능 (출발지, 도착지, 날짜)
   - 새 카풀 등록
   - 카풀 상세 정보 확인 및 수정

2. **카풀 정보 편집 (Editor.js)**
   - 카풀 유형 선택 (탑승자, 운전자, 택시)
   - 출발 시간 및 날짜 설정
   - 성별 선호도 설정 (성별무관, 동성)
   - 예약 기능 (예약하기/예약 취소, 예약 마감 처리)
   - 포인트 기반 결제 시스템
   - 실시간 채팅 기능

## 기술 스택

- Frontend: React.js
- 상태 관리: React Hooks (useState, useEffect)
- API 통신: Axios
- 지도 서비스: Kakao Map, T Map API
- 실시간 통신: Socket.io API

## 주요 컴포넌트

1. **Main.js (메인 페이지)**
   - 카풀 목록 관리 및 표시
   - 필터링 및 검색 기능
   - 새 카풀 등록 및 편집 모달 관리
   - 사용자 정보 및 예약 상태 관리

2. **Editor.js (카풀 정보 편집)**
   - 카풀 정보 수정 및 삭제
   - 예약 생성 및 취소 기능
   - 결제 처리 시스템
   - 채팅 기능 연동
   - 사용자 권한에 따른 UI 조정

3. **Map.js (지도 및 경로 관리)**
   - 카카오맵 API 통합
   - 장소 검색 및 마커 설정
   - T Map API를 이용한 경로 계산
   - 비용 추정 (기름값, 택시비)
   - 경유지 관리
   - 동적 제목 생성

## 이용 방법

1. **회원가입 및 로그인**
2. **카풀 검색**
   - 출발지, 도착지, 날짜로 검색
   - 유형별 필터링 가능
3. **카풀 등록**
   - '+' 버튼으로 새 카풀 등록
   - 유형, 시간, 날짜, 성별 선호도 등 정보 입력
4. **예약하기**
   - 원하는 카풀 선택 후 예약
5. **채팅 이용**
   - 예약 완료 후 채팅방 참여 가능
6. **카풀 완료 및 결제**
   - 카풀 후 포인트로 결제 진행

## 결제 시스템

1. **게시물 작성**: 사용자가 "탑승자", "운전자", 또는 "택시" 유형의 
   게시물을 작성
2. **예약 과정**:
   - 탑승자 게시물: 다른 사용자가 예약, 작성자가 예약 마감
   - 운전자/택시 게시물: 다른 사용자가 예약
3. **결제하기 버튼 표시 조건**:
   - 탑승자 게시물: 예약 마감 후 작성자에게 표시
   - 운전자/택시 게시물: 예약한 사용자에게 표시

### 주의사항
- 일회성 결제
- 예약 필수 (탑승자 등록 카풀의 경우)
- 결제 취소 및 환불 기능 미구현 (고객 지원 센터 통해 해결)

## 보안 및 인증

- 토큰 기반 인증 시스템
- 사용자 권한에 따른 기능 접근 제어

## 프로젝트 상태

현재 구현 중인 프로젝트로, 지속적인 업데이트와 기능 개선이 진행될 
예정입니다.

## 일반적인 오류와 해결 방법

1. **무결성 오류**
   - npm 캐시 정리: `npm cache clean --force`
   - `node_modules` 폴더와 `package-lock.json` 파일 삭제
   - 의존성 재설치: `npm install`

2. **400 Bad Request**
   - 요청 파라미터와 본문 확인
   - API 문서 참조하여 올바른 요청 형식 확인
   - 클라이언트 측 유효성 검사 강화

3. **401 Unauthorized**
   - 인증 토큰 확인
   - 토큰 갱신 메커니즘 구현
   - 로그인 상태 및 세션 관리 로직 검토

4. **404 Not Found**
   - API 엔드포인트 URL 확인
   - 백엔드 라우팅 설정 검토
   - 리소스 존재 여부 확인

5. **CORS 오류**
   - 백엔드 CORS 설정 확인
   - 프록시 설정 (개발 환경)
   - Origin 헤더 설정 확인

6. **'module not found' 오류**
   - `npm install` 실행
   - `package.json` 확인
   - `node_modules` 폴더 재설치

7. **환경 변수 관련 오류**
   - `.env` 파일 위치 확인
   - `dotenv` 패키지 설정 확인
   - 환경 변수 이름 확인 (대소문자 구분)

8. **버전 불일치 오류**
   - `package.json` 의존성 버전 확인
   - 호환 버전으로 업데이트/다운그레이드
   - `npm update` 또는 패키지 재설치

9. **API 요청 실패**
   - API 엔드포인트 URL 확인
   - 네트워크 연결 상태 확인
   - API 서버 상태 확인
   - 요청 헤더 및 본문 데이터 확인
